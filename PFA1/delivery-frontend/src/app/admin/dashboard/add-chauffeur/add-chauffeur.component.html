<div class="add-chauffeur-container">
  <mat-card class="form-card">
    <mat-card-header>
      <mat-card-title>
        <mat-icon>person_add</mat-icon>
        Ajouter un Chauffeur
      </mat-card-title>
    </mat-card-header>

    <mat-card-content>
      <form [formGroup]="chauffeurForm" (ngSubmit)="onSubmit()" class="chauffeur-form">
        
        <!-- Nom -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Nom</mat-label>
          <input matInput 
                 formControlName="nom" 
                 placeholder="Ex: Dupont"
                 maxlength="50">
          <mat-icon matSuffix>person</mat-icon>
          <mat-error *ngIf="hasError('nom', 'required')">
            Le nom est requis
          </mat-error>
          <mat-error *ngIf="hasError('nom', 'minlength')">
            Le nom doit contenir au moins 2 caractères
          </mat-error>
        </mat-form-field>

        <!-- Prénom -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Prénom</mat-label>
          <input matInput 
                 formControlName="prenom" 
                 placeholder="Ex: Jean"
                 maxlength="50">
          <mat-icon matSuffix>person_outline</mat-icon>
          <mat-error *ngIf="hasError('prenom', 'required')">
            Le prénom est requis
          </mat-error>
          <mat-error *ngIf="hasError('prenom', 'minlength')">
            Le prénom doit contenir au moins 2 caractères
          </mat-error>
        </mat-form-field>

        <!-- Téléphone -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Téléphone</mat-label>
          <input matInput 
                 formControlName="telephone" 
                 placeholder="Ex: 0612345678"
                 maxlength="15">
          <mat-icon matSuffix>phone</mat-icon>
          <mat-error *ngIf="hasError('telephone', 'required')">
            Le téléphone est requis
          </mat-error>
          <mat-error *ngIf="hasError('telephone', 'pattern')">
            Format de téléphone invalide
          </mat-error>
        </mat-form-field>

        <!-- Email -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input matInput 
                 type="email"
                 formControlName="email" 
                 placeholder="Ex: jean.dupont@example.com"
                 maxlength="100">
          <mat-icon matSuffix>email</mat-icon>
          <mat-error *ngIf="hasError('email', 'required')">
            L'email est requis
          </mat-error>
          <mat-error *ngIf="hasError('email', 'email')">
            Format d'email invalide
          </mat-error>
        </mat-form-field>

        <!-- Mot de passe -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Mot de passe</mat-label>
          <input matInput 
                 [type]="hidePassword ? 'password' : 'text'"
                 formControlName="password" 
                 placeholder="Entrez un mot de passe sécurisé"
                 maxlength="50">
          <mat-icon matSuffix (click)="hidePassword = !hidePassword" style="cursor: pointer">
            {{hidePassword ? 'visibility_off' : 'visibility'}}
          </mat-icon>
          <mat-error *ngIf="hasError('password', 'required')">
            Le mot de passe est requis
          </mat-error>
          <mat-error *ngIf="hasError('password', 'minlength')">
            Le mot de passe doit contenir au moins 6 caractères
          </mat-error>
        </mat-form-field>

        <!-- Date d'embauche -->
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Date d'embauche</mat-label>
          <input matInput 
                 [matDatepicker]="picker" 
                 formControlName="dateEmbauche"
                 placeholder="Sélectionnez une date">
          <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
          <mat-datepicker #picker></mat-datepicker>
          <mat-error *ngIf="hasError('dateEmbauche', 'required')">
            La date d'embauche est requise
          </mat-error>
        </mat-form-field>

        <!-- Actif -->
        <div class="checkbox-field">
          <mat-checkbox formControlName="actif" color="primary">
            <mat-icon>check_circle</mat-icon>
            Chauffeur actif
          </mat-checkbox>
          <mat-hint>Cochez si le chauffeur est actif et peut recevoir des missions</mat-hint>
        </div>

        <!-- Actions -->
        <div class="form-actions">
          <button mat-raised-button 
                  type="button" 
                  color="warn" 
                  (click)="onCancel()"
                  [disabled]="isLoading">
            <mat-icon>cancel</mat-icon>
            Annuler
          </button>
          
          <button mat-raised-button 
                  type="submit" 
                  color="primary" 
                  [disabled]="chauffeurForm.invalid || isLoading">
            <mat-icon *ngIf="!isLoading">add</mat-icon>
            <mat-spinner *ngIf="isLoading" diameter="20"></mat-spinner>
            {{ isLoading ? 'Ajout en cours...' : 'Ajouter le Chauffeur' }}
          </button>
        </div>

      </form>
    </mat-card-content>
  </mat-card>
</div>
